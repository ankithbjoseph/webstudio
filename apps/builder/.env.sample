# =============================================================================
# Webstudio Builder Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values for your environment.
# For local development, you can also create .env.development to override values.
# For more details, visit: https://vitejs.dev/guide/env-and-mode#env-files
# =============================================================================

# =============================================================================
# DATABASE
# =============================================================================
# PostgreSQL connection URL (with connection pooling like pgbouncer)
DATABASE_URL=postgresql://postgres:pass@localhost/webstudio?pgbouncer=true

# Direct PostgreSQL connection URL (without connection pooling, used for migrations)
DIRECT_URL=postgresql://postgres:pass@localhost/webstudio

# =============================================================================
# AUTHENTICATION
# =============================================================================
# Secret key for session encryption and context encoding
# Generate with: openssl rand -hex 32 (Linux) or visit https://generate-secret.now.sh/64
AUTH_SECRET=

# Enable development login bypass (set to "true" for local development)
DEV_LOGIN=

# GitHub OAuth credentials
# Create OAuth App: https://github.com/settings/developers
GH_CLIENT_ID=
GH_CLIENT_SECRET=

# Google OAuth credentials
# Create OAuth App: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# OAuth client credentials for project authentication flow
AUTH_WS_CLIENT_ID=
AUTH_WS_CLIENT_SECRET=

# =============================================================================
# DEPLOYMENT
# =============================================================================
# Deployment environment: development | preview | production
DEPLOYMENT_ENVIRONMENT=

# Public URL of this deployment
DEPLOYMENT_URL=

# Server port
PORT=3000

# =============================================================================
# VERCEL (Auto-detected when deployed on Vercel)
# =============================================================================
# These are automatically set by Vercel, but can be manually configured:
# VERCEL=1
# VERCEL_ENV=development|preview|production
# VERCEL_URL=your-deployment.vercel.app
# USE_VERCEL_PRESET=1

# =============================================================================
# TRPC SERVER (For SaaS deployment)
# =============================================================================
# Remote TRPC server URL. If empty, local TRPC server is used.
TRPC_SERVER_URL=
TRPC_SERVER_API_TOKEN=

# =============================================================================
# POSTGREST API
# =============================================================================
# PostgREST server URL
POSTGREST_URL=http://localhost:3000

# JWT token for PostgREST authentication
# Token should be encoded using PGRST_JWT_SECRET from docker-compose.yml
# Decode/encode using jwt.io
POSTGREST_API_KEY=

# =============================================================================
# ASSET STORAGE (S3-Compatible)
# =============================================================================
# S3-compatible storage configuration for assets
S3_ENDPOINT=
S3_REGION=
S3_BUCKET=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_ACL=public-read

# CDN URL for assets (if using Cloudflare R2, this is your worker URL)
# ASSET_CDN_URL=https://assets.webstudio.is

# Origin of service implementing /cdn-cgi/image/ cloudflare endpoint (without ending slash)
# Used for image resizing
RESIZE_ORIGIN=

# =============================================================================
# ASSET LIMITS
# =============================================================================
# Maximum upload size in MB
MAX_UPLOAD_SIZE=10

# Maximum number of assets per project
MAX_ASSETS_PER_PROJECT=50

# =============================================================================
# PUBLISHING
# =============================================================================
# Publisher host domain
PUBLISHER_HOST=wstd.work

# Publisher service endpoint
# PUBLISHER_ENDPOINT=https://publisher.webstudio.is

# Publisher authentication token
# PUBLISHER_TOKEN=

# Base origin for accessing user-generated build (canvas / preview / etc)
# Should contain protocol and host (e.g. https://example.com)
# Will be detected automatically in development environments like localhost or preview deployment
# BUILD_ORIGIN=https://wstd.live

# If set to "true", user-generated build will be available
# only at {project.domain} subdomain of {BUILD_ORIGIN}.
# This is used in production deployment for security reasons.
# BUILD_REQUIRE_SUBDOMAIN=

# =============================================================================
# ENTRI API (Domain Configuration)
# =============================================================================
# Entri API credentials for domain management
ENTRI_APPLICATION_ID=webstudio
ENTRI_SECRET=

# =============================================================================
# TEMPLATES
# =============================================================================
# Comma-separated list of project IDs to use as templates in dashboard
# PROJECT_TEMPLATES=project-id-1,project-id-2,project-id-3

# =============================================================================
# WEBHOOKS (N8N Integration)
# =============================================================================
# N8N webhook for external integrations
N8N_WEBHOOK_URL=
N8N_WEBHOOK_TOKEN=

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable features behind a flag
# Use "*" to enable all features, or comma-separated list of feature names
FEATURES=

# Current user plan features (default plan assigned to users)
# Example: pro, free, enterprise
USER_PLAN=

# =============================================================================
# AI FEATURES (Optional)
# =============================================================================
# OpenAI API credentials for AI-powered features
# Get your key at: https://platform.openai.com/account/api-keys
# OPENAI_KEY=

# OpenAI Organization ID (optional, starts with "org-")
# Get your org ID at: https://platform.openai.com/account/org-settings
# OPENAI_ORG=

# =============================================================================
# SECURE COOKIES
# =============================================================================
# Set to "false" only for local development over HTTP
# In production, this should always be true (uses HTTPS)
# SECURE_COOKIE=true
